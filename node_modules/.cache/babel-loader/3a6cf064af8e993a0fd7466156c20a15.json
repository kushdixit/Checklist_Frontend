{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { Provider } from 'react-redux';\n/**\n * Quick note on Next.js return types:\n *\n * Page.getInitialProps https://nextjs.org/docs/api-reference/data-fetching/getInitialProps\n * as-is\n *\n * App.getInitialProps: AppInitialProps https://nextjs.org/docs/advanced-features/custom-app\n * {pageProps: any}\n *\n * getStaticProps https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation\n * {props: any}\n *\n * getServerSideProps https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering\n * {props: any}\n */\n\nexport var HYDRATE = '__NEXT_REDUX_WRAPPER_HYDRATE__';\n\nvar getIsServer = function () {\n  return typeof window === 'undefined';\n};\n\nvar getDeserializedState = function (initialState, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      deserializeState = _b.deserializeState;\n\n  return deserializeState ? deserializeState(initialState) : initialState;\n};\n\nvar getSerializedState = function (state, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      serializeState = _b.serializeState;\n\n  return serializeState ? serializeState(state) : state;\n};\n\nvar store;\n\nvar initStore = function (_a) {\n  var makeStore = _a.makeStore,\n      context = _a.context;\n\n  var createStore = function () {\n    return makeStore(context);\n  };\n\n  if (getIsServer()) {\n    var c = context;\n    var req = void 0;\n    if (c.req) req = c.req;\n    if (c.ctx && c.ctx.req) req = c.ctx.req;\n\n    if (req) {\n      // ATTENTION! THIS IS INTERNAL, DO NOT ACCESS DIRECTLY ANYWHERE ELSE\n      // @see https://github.com/kirill-konshin/next-redux-wrapper/pull/196#issuecomment-611673546\n      if (!req.__nextReduxWrapperStore) req.__nextReduxWrapperStore = createStore();\n      return req.__nextReduxWrapperStore;\n    }\n\n    return createStore();\n  } // Memoize store if client\n\n\n  if (!store) {\n    store = createStore();\n  }\n\n  return store;\n};\n\nexport var createWrapper = function (makeStore, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var makeProps = function (_a) {\n    var callback = _a.callback,\n        context = _a.context;\n    return __awaiter(void 0, void 0, void 0, function () {\n      var store, nextCallback, initialProps, _b, state;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            store = initStore({\n              context: context,\n              makeStore: makeStore\n            });\n            if (config.debug) console.log(\"1. getProps created store with state\", store.getState());\n            nextCallback = callback && callback(store);\n            _b = nextCallback;\n            if (!_b) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , nextCallback(context)];\n\n          case 1:\n            _b = _c.sent();\n            _c.label = 2;\n\n          case 2:\n            initialProps = _b || {};\n            if (config.debug) console.log(\"3. getProps after dispatches has store state\", store.getState());\n            state = store.getState();\n            return [2\n            /*return*/\n            , {\n              initialProps: initialProps,\n              initialState: getIsServer() ? getSerializedState(state, config) : state\n            }];\n        }\n      });\n    });\n  };\n\n  var getInitialPageProps = function (callback) {\n    return function (context) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          if ('getState' in context) {\n            return [2\n            /*return*/\n            , callback && callback(context)];\n          }\n\n          return [2\n          /*return*/\n          , makeProps({\n            callback: callback,\n            context: context\n          })];\n        });\n      });\n    };\n  };\n\n  var getInitialAppProps = function (callback) {\n    return function (context) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var _a, initialProps, initialState;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , makeProps({\n                callback: callback,\n                context: context\n              })];\n\n            case 1:\n              _a = _b.sent(), initialProps = _a.initialProps, initialState = _a.initialState;\n              return [2\n              /*return*/\n              , __assign(__assign({}, initialProps), {\n                initialState: initialState\n              })];\n          }\n        });\n      });\n    };\n  };\n\n  var getStaticProps = function (callback) {\n    return function (context) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var _a, initialProps, initialState;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , makeProps({\n                callback: callback,\n                context: context\n              })];\n\n            case 1:\n              _a = _b.sent(), initialProps = _a.initialProps, initialState = _a.initialState;\n              return [2\n              /*return*/\n              , __assign(__assign({}, initialProps), {\n                props: __assign(__assign({}, initialProps.props), {\n                  initialState: initialState\n                })\n              })];\n          }\n        });\n      });\n    };\n  };\n\n  var getServerSideProps = function (callback) {\n    return function (context) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , getStaticProps(callback)(context)];\n\n            case 1:\n              return [2\n              /*return*/\n              , _a.sent()];\n          }\n        });\n      });\n    };\n  }; // just not to repeat myself\n\n\n  var withRedux = function (Component) {\n    var _a;\n\n    var displayName = \"withRedux(\" + (Component.displayName || Component.name || 'Component') + \")\";\n    var hasInitialProps = ('getInitialProps' in Component); //TODO Check if pages/_app was wrapped so there's no need to wrap a page itself\n\n    return _a =\n    /** @class */\n    function (_super) {\n      __extends(Wrapper, _super);\n\n      function Wrapper(props, context) {\n        var _this = _super.call(this, props, context) || this;\n\n        _this.store = null;\n\n        _this.hydrate(props, context);\n\n        return _this;\n      }\n\n      Wrapper.prototype.hydrate = function (_a, context) {\n        var _b;\n\n        var initialState = _a.initialState,\n            initialProps = _a.initialProps,\n            props = __rest(_a, [\"initialState\", \"initialProps\"]); // this happens when App has page with getServerSideProps/getStaticProps, initialState will be dumped twice:\n        // one incomplete and one complete\n\n\n        var initialStateFromGSPorGSSR = (_b = props === null || props === void 0 ? void 0 : props.pageProps) === null || _b === void 0 ? void 0 : _b.initialState;\n\n        if (!this.store) {\n          this.store = initStore({\n            makeStore: makeStore,\n            context: context\n          });\n          if (config.debug) console.log('4. WrappedApp created new store with', displayName, {\n            initialState: initialState,\n            initialStateFromGSPorGSSR: initialStateFromGSPorGSSR\n          });\n        }\n\n        if (initialState) this.store.dispatch({\n          type: HYDRATE,\n          payload: getDeserializedState(initialState, config)\n        }); // ATTENTION! This code assumes that Page's getServerSideProps is executed after App.getInitialProps\n        // so we dispatch in this order\n\n        if (initialStateFromGSPorGSSR) this.store.dispatch({\n          type: HYDRATE,\n          payload: getDeserializedState(initialStateFromGSPorGSSR, config)\n        });\n      };\n\n      Wrapper.prototype.shouldComponentUpdate = function (nextProps, nextState, nextContext) {\n        var _a, _b, _c, _d;\n\n        if (((_a = nextProps === null || nextProps === void 0 ? void 0 : nextProps.pageProps) === null || _a === void 0 ? void 0 : _a.initialState) !== ((_c = (_b = this.props) === null || _b === void 0 ? void 0 : _b.pageProps) === null || _c === void 0 ? void 0 : _c.initialState) || (nextProps === null || nextProps === void 0 ? void 0 : nextProps.initialState) !== ((_d = this.props) === null || _d === void 0 ? void 0 : _d.initialState)) {\n          this.hydrate(nextProps, nextContext);\n        }\n\n        return true;\n      };\n\n      Wrapper.prototype.render = function () {\n        var _a, _b;\n\n        var _c = this.props,\n            initialState = _c.initialState,\n            initialProps = _c.initialProps,\n            props = __rest(_c, [\"initialState\", \"initialProps\"]);\n\n        var resultProps = props; // order is important! Next.js overwrites props from pages/_app with getStaticProps from page\n        // @see https://github.com/zeit/next.js/issues/11648\n\n        if (initialProps && initialProps.pageProps) resultProps.pageProps = __assign(__assign({}, initialProps.pageProps), props.pageProps);\n        var initialStateFromGSPorGSSR = (_a = props === null || props === void 0 ? void 0 : props.pageProps) === null || _a === void 0 ? void 0 : _a.initialState; // just some cleanup to prevent passing it as props, we need to clone props to safely delete initialState\n\n        if (initialStateFromGSPorGSSR) {\n          resultProps = __assign(__assign({}, props), {\n            pageProps: __assign({}, props.pageProps)\n          });\n          delete resultProps.pageProps.initialState;\n        } // unwrap getInitialPageProps\n\n\n        if ((_b = resultProps === null || resultProps === void 0 ? void 0 : resultProps.pageProps) === null || _b === void 0 ? void 0 : _b.initialProps) {\n          resultProps.pageProps = __assign(__assign({}, resultProps.pageProps), resultProps.pageProps.initialProps);\n          delete resultProps.pageProps.initialProps;\n        }\n\n        return React.createElement(Provider, {\n          store: this.store\n        }, React.createElement(Component, __assign({}, initialProps, resultProps)));\n      };\n\n      return Wrapper;\n    }(React.Component), _a.displayName = displayName, _a.getInitialProps = hasInitialProps ? Component.getInitialProps : undefined, _a;\n  };\n\n  return {\n    getServerSideProps: getServerSideProps,\n    getStaticProps: getStaticProps,\n    getInitialAppProps: getInitialAppProps,\n    getInitialPageProps: getInitialPageProps,\n    withRedux: withRedux\n  };\n}; // Legacy\n\nexport default (function (makeStore, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  console.warn('/!\\\\ You are using legacy implementaion. Please update your code: use createWrapper() and wrapper.withRedux().');\n  return createWrapper(makeStore, config).withRedux;\n});","map":{"version":3,"mappings":"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","names":["React","Provider","HYDRATE","getIsServer","window","getDeserializedState","initialState","_a","_b","deserializeState","getSerializedState","state","serializeState","store","initStore","makeStore","context","createStore","c","req","ctx","__nextReduxWrapperStore","createWrapper","config","makeProps","callback","debug","console","log","getState","nextCallback","_c","initialProps","getInitialPageProps","getInitialAppProps","getStaticProps","__assign","props","getServerSideProps","withRedux","Component","displayName","name","hasInitialProps","__extends","_super","_this","hydrate","Wrapper","initialStateFromGSPorGSSR","pageProps","dispatch","type","payload","nextProps","nextState","nextContext","_d","resultProps","getInitialProps","undefined","warn"],"sources":["/Users/satvinder/Desktop/Projects/Checklist/Checklist/Checklist_Frontend/node_modules/next-redux-wrapper/src/index.tsx"],"sourcesContent":["import App, {AppContext, AppInitialProps} from 'next/app';\nimport React from 'react';\nimport {Provider} from 'react-redux';\nimport {Store} from 'redux';\nimport {\n    GetServerSideProps,\n    GetServerSidePropsContext,\n    GetStaticProps,\n    GetStaticPropsContext,\n    NextComponentType,\n    NextPageContext,\n} from 'next';\n\n/**\n * Quick note on Next.js return types:\n *\n * Page.getInitialProps https://nextjs.org/docs/api-reference/data-fetching/getInitialProps\n * as-is\n *\n * App.getInitialProps: AppInitialProps https://nextjs.org/docs/advanced-features/custom-app\n * {pageProps: any}\n *\n * getStaticProps https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation\n * {props: any}\n *\n * getServerSideProps https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering\n * {props: any}\n */\n\nexport const HYDRATE = '__NEXT_REDUX_WRAPPER_HYDRATE__';\n\nconst getIsServer = () => typeof window === 'undefined';\n\nconst getDeserializedState = <S extends Store>(initialState: any, {deserializeState}: Config<S> = {}) =>\n    deserializeState ? deserializeState(initialState) : initialState;\n\nconst getSerializedState = <S extends Store>(state: any, {serializeState}: Config<S> = {}) =>\n    serializeState ? serializeState(state) : state;\n\nexport declare type MakeStore<S extends Store> = (context: Context) => S;\n\nexport interface InitStoreOptions<S extends Store> {\n    makeStore: MakeStore<S>;\n    context: Context;\n}\n\nlet store: any;\n\nconst initStore = <S extends Store>({makeStore, context}: InitStoreOptions<S>): S => {\n    const createStore = () => makeStore(context);\n\n    if (getIsServer()) {\n        const c = context as any;\n        let req;\n        if (c.req) req = c.req;\n        if (c.ctx && c.ctx.req) req = c.ctx.req;\n        if (req) {\n            // ATTENTION! THIS IS INTERNAL, DO NOT ACCESS DIRECTLY ANYWHERE ELSE\n            // @see https://github.com/kirill-konshin/next-redux-wrapper/pull/196#issuecomment-611673546\n            if (!req.__nextReduxWrapperStore) req.__nextReduxWrapperStore = createStore();\n            return req.__nextReduxWrapperStore;\n        }\n\n        return createStore();\n    }\n\n    // Memoize store if client\n    if (!store) {\n        store = createStore();\n    }\n\n    return store;\n};\n\nexport const createWrapper = <S extends Store>(makeStore: MakeStore<S>, config: Config<S> = {}) => {\n    const makeProps = async ({\n        callback,\n        context,\n    }: {\n        callback: Callback<S, any>;\n        context: any;\n    }): Promise<WrapperProps> => {\n        const store = initStore({context, makeStore});\n\n        if (config.debug) console.log(`1. getProps created store with state`, store.getState());\n\n        const nextCallback = callback && callback(store);\n        const initialProps = (nextCallback && (await nextCallback(context))) || {};\n\n        if (config.debug) console.log(`3. getProps after dispatches has store state`, store.getState());\n\n        const state = store.getState();\n\n        return {\n            initialProps,\n            initialState: getIsServer() ? getSerializedState<S>(state, config) : state,\n        };\n    };\n\n    const getInitialPageProps = <P extends {} = any>(callback: PageCallback<S, P>): GetInitialPageProps<P> => async (\n        context: NextPageContext | any, // legacy\n    ) => {\n        if ('getState' in context) {\n            return callback && callback(context as any);\n        }\n        return makeProps({callback, context});\n    };\n\n    const getInitialAppProps = <P extends {} = any>(callback: AppCallback<S, P>): GetInitialAppProps<P> => async (\n        context: AppContext,\n    ) => {\n        const {initialProps, initialState} = await makeProps({callback, context});\n        return {\n            ...initialProps,\n            initialState,\n        };\n    };\n\n    const getStaticProps = <P extends {} = any>(\n        callback: GetStaticPropsCallback<S, P>,\n    ): GetStaticProps<P> => async context => {\n        const {initialProps, initialState} = await makeProps({callback, context});\n        return {\n            ...initialProps,\n            props: {\n                ...initialProps.props,\n                initialState,\n            },\n        } as any;\n    };\n\n    const getServerSideProps = <P extends {} = any>(\n        callback: GetServerSidePropsCallback<S, P>,\n    ): GetServerSideProps<P> => async context => await getStaticProps(callback as any)(context); // just not to repeat myself\n\n    const withRedux = (Component: NextComponentType | App | any) => {\n        const displayName = `withRedux(${Component.displayName || Component.name || 'Component'})`;\n\n        const hasInitialProps = 'getInitialProps' in Component;\n\n        //TODO Check if pages/_app was wrapped so there's no need to wrap a page itself\n        return class Wrapper extends React.Component<any, any> {\n            static displayName = displayName;\n\n            static getInitialProps = hasInitialProps ? Component.getInitialProps : undefined;\n\n            public store: S = null as any;\n\n            constructor(props: any, context: any) {\n                super(props, context);\n                this.hydrate(props, context);\n            }\n\n            hydrate({initialState, initialProps, ...props}: any, context: any) {\n                // this happens when App has page with getServerSideProps/getStaticProps, initialState will be dumped twice:\n                // one incomplete and one complete\n                const initialStateFromGSPorGSSR = props?.pageProps?.initialState;\n\n                if (!this.store) {\n                    this.store = initStore({makeStore, context});\n\n                    if (config.debug)\n                        console.log('4. WrappedApp created new store with', displayName, {\n                            initialState,\n                            initialStateFromGSPorGSSR,\n                        });\n                }\n\n                if (initialState)\n                    this.store.dispatch({\n                        type: HYDRATE,\n                        payload: getDeserializedState<S>(initialState, config),\n                    } as any);\n\n                // ATTENTION! This code assumes that Page's getServerSideProps is executed after App.getInitialProps\n                // so we dispatch in this order\n                if (initialStateFromGSPorGSSR)\n                    this.store.dispatch({\n                        type: HYDRATE,\n                        payload: getDeserializedState<S>(initialStateFromGSPorGSSR, config),\n                    } as any);\n            }\n\n            shouldComponentUpdate(nextProps: Readonly<any>, nextState: Readonly<any>, nextContext: any): boolean {\n                if (\n                    nextProps?.pageProps?.initialState !== this.props?.pageProps?.initialState ||\n                    nextProps?.initialState !== this.props?.initialState\n                ) {\n                    this.hydrate(nextProps, nextContext);\n                }\n\n                return true;\n            }\n\n            render() {\n                const {initialState, initialProps, ...props} = this.props;\n\n                let resultProps: any = props;\n\n                // order is important! Next.js overwrites props from pages/_app with getStaticProps from page\n                // @see https://github.com/zeit/next.js/issues/11648\n                if (initialProps && initialProps.pageProps)\n                    resultProps.pageProps = {\n                        ...initialProps.pageProps, // this comes from wrapper in _app mode\n                        ...props.pageProps, // this comes from gssp/gsp in _app mode\n                    };\n\n                const initialStateFromGSPorGSSR = props?.pageProps?.initialState;\n\n                // just some cleanup to prevent passing it as props, we need to clone props to safely delete initialState\n                if (initialStateFromGSPorGSSR) {\n                    resultProps = {...props, pageProps: {...props.pageProps}};\n                    delete resultProps.pageProps.initialState;\n                }\n\n                // unwrap getInitialPageProps\n                if (resultProps?.pageProps?.initialProps) {\n                    resultProps.pageProps = {...resultProps.pageProps, ...resultProps.pageProps.initialProps};\n                    delete resultProps.pageProps.initialProps;\n                }\n\n                return (\n                    <Provider store={this.store}>\n                        <Component {...initialProps} {...resultProps} />\n                    </Provider>\n                );\n            }\n        };\n    };\n\n    return {\n        getServerSideProps,\n        getStaticProps,\n        getInitialAppProps,\n        getInitialPageProps,\n        withRedux,\n    };\n};\n\n// Legacy\nexport default <S extends Store>(makeStore: MakeStore<S>, config: Config<S> = {}) => {\n    console.warn(\n        '/!\\\\ You are using legacy implementaion. Please update your code: use createWrapper() and wrapper.withRedux().',\n    );\n    return createWrapper(makeStore, config).withRedux;\n};\n\nexport type Context = NextPageContext | AppContext | GetStaticPropsContext | GetServerSidePropsContext;\n\nexport interface Config<S extends Store> {\n    serializeState?: (state: ReturnType<S['getState']>) => any;\n    deserializeState?: (state: any) => ReturnType<S['getState']>;\n    debug?: boolean;\n}\n\nexport interface WrapperProps {\n    initialProps: any; // stuff returned from getInitialProps or getServerSideProps\n    initialState: any; // stuff in the Store state after getInitialProps\n}\n\ntype GetInitialPageProps<P> = NextComponentType<NextPageContext, any, P>['getInitialProps'];\n\n//FIXME Could be typeof App.getInitialProps & appGetInitialProps (not exported), see https://github.com/kirill-konshin/next-redux-wrapper/issues/412\ntype GetInitialAppProps<P> = ({Component, ctx}: AppContext) => Promise<AppInitialProps & {pageProps: P}>;\n\nexport type GetStaticPropsCallback<S extends Store, P> = (store: S) => GetStaticProps<P>;\nexport type GetServerSidePropsCallback<S extends Store, P> = (store: S) => GetServerSideProps<P>;\nexport type PageCallback<S extends Store, P> = (store: S) => GetInitialPageProps<P>;\nexport type AppCallback<S extends Store, P> = (store: S) => GetInitialAppProps<P>;\nexport type Callback<S extends Store, P> =\n    | GetStaticPropsCallback<S, P>\n    | GetServerSidePropsCallback<S, P>\n    | PageCallback<S, P>\n    | AppCallback<S, P>;\n\ndeclare module 'next' {\n    export interface NextPageContext<S extends Store = any> {\n        //<S = any, A extends Action = AnyAction>\n        /**\n         * Provided by next-redux-wrapper: The redux store\n         */\n        store: S;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}